{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { finalize } from 'rxjs/operators';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"fileInput\"];\nconst _c1 = () => ({\n  label: \"Product Name\",\n  control: \"name\",\n  type: \"text\"\n});\nconst _c2 = () => ({\n  label: \"Brand\",\n  control: \"brand\",\n  type: \"text\"\n});\nconst _c3 = () => ({\n  label: \"Price Per Day\",\n  control: \"pricePerDay\",\n  type: \"number\"\n});\nconst _c4 = () => ({\n  label: \"Price for Sale\",\n  control: \"priceForSale\",\n  type: \"number\"\n});\nconst _c5 = (a0, a1, a2, a3) => [a0, a1, a2, a3];\nfunction AddProductComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 32);\n    i0.ɵɵelement(1, \"img\", 33);\n    i0.ɵɵelementStart(2, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function AddProductComponent_div_9_Template_button_click_2_listener() {\n      const i_r3 = i0.ɵɵrestoreView(_r2).index;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.removeImage(i_r3));\n    });\n    i0.ɵɵtext(3, \"Remove\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const img_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", img_r5.url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AddProductComponent_div_17_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" Required / Invalid value \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddProductComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"label\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 35);\n    i0.ɵɵtemplate(4, AddProductComponent_div_17_div_4_Template, 2, 0, \"div\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    let tmp_6_0;\n    const field_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(field_r6.label);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"type\", field_r6.type)(\"formControlName\", field_r6.control);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx_r3.productForm.get(field_r6.control)) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx_r3.productForm.get(field_r6.control)) == null ? null : tmp_6_0.touched));\n  }\n}\nfunction AddProductComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r7);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(type_r7);\n  }\n}\nfunction AddProductComponent_option_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const size_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", size_r8);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(size_r8);\n  }\n}\nfunction AddProductComponent_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const color_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", color_r9);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(color_r9);\n  }\n}\nfunction AddProductComponent_option_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r10);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cat_r10);\n  }\n}\nfunction AddProductComponent_option_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const sub_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sub_r11);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(sub_r11);\n  }\n}\nfunction AddProductComponent_span_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 39);\n  }\n}\nexport let AddProductComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class AddProductComponent {\n    constructor(fb, http) {\n      this.fb = fb;\n      this.http = http;\n      this.images = [];\n      this.loading = false;\n      this.errorMsg = '';\n      this.productTypes = ['Moisturizer', 'Sunscreen', 'Serum'];\n      this.categories = ['Skin Care', 'Hair Care'];\n      this.subcategories = ['Face', 'Body', 'Hair'];\n      this.sizes = ['S', 'M', 'L', 'XL'];\n      this.colors = ['Red', 'Blue', 'Green', 'Black'];\n    }\n    ngOnInit() {\n      this.productForm = this.fb.group({\n        name: ['', Validators.required],\n        productType: ['', Validators.required],\n        brand: ['', Validators.required],\n        pricePerDay: ['', [Validators.required, Validators.min(0)]],\n        priceForSale: ['', [Validators.required, Validators.min(0)]],\n        // discount: ['', [Validators.min(0), Validators.max(100)]],\n        // expirationDate: ['', Validators.required],\n        description: ['', Validators.required],\n        availableType: ['Sell', Validators.required],\n        size: ['', Validators.required],\n        color: ['', Validators.required],\n        category: ['', Validators.required],\n        subcategory: ['', Validators.required]\n      });\n    }\n    onAddImage(event) {\n      const file = event.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.images.push({\n            url: e.target.result,\n            file\n          });\n        };\n        reader.readAsDataURL(file);\n      }\n    }\n    addAnotherImage() {\n      this.fileInput.nativeElement.click();\n    }\n    removeImage(index) {\n      this.images.splice(index, 1);\n    }\n    onSubmit() {\n      if (this.productForm.invalid) {\n        this.errorMsg = 'Please fill all required fields correctly.';\n        this.productForm.markAllAsTouched();\n        return;\n      }\n      this.loading = true;\n      this.errorMsg = '';\n      const formData = new FormData();\n      Object.keys(this.productForm.value).forEach(key => {\n        formData.append(key, this.productForm.value[key]);\n      });\n      this.images.forEach(img => {\n        if (img.file) formData.append('images', img.file, img.file.name);\n      });\n      // Example POST request (replace URL with your API)\n      this.http.post('/api/products', formData).pipe(finalize(() => this.loading = false)).subscribe({\n        next: res => {\n          console.log('Product added', res);\n          this.productForm.reset();\n          this.images = [];\n        },\n        error: err => {\n          console.error(err);\n          this.errorMsg = 'Failed to add product. Try again.';\n        }\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function AddProductComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AddProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient));\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddProductComponent,\n      selectors: [[\"app-add-product\"]],\n      viewQuery: function AddProductComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n        }\n      },\n      decls: 72,\n      vars: 19,\n      consts: [[\"fileInput\", \"\"], [1, \"add-product-page\", \"p-4\", \"bg-light\", \"rounded-3\", \"shadow-sm\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"row\", \"g-4\"], [1, \"col-md-4\"], [1, \"card\", \"p-3\"], [1, \"mb-3\"], [\"type\", \"file\", \"hidden\", \"\", 3, \"change\"], [\"class\", \"position-relative mb-2\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"w-100\", \"mt-2\", 3, \"click\"], [1, \"col-md-8\"], [1, \"card\", \"p-3\", \"mb-3\"], [1, \"row\", \"g-3\"], [\"class\", \"col-md-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-6\"], [1, \"form-label\"], [\"formControlName\", \"productType\", 1, \"form-select\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"availableType\", 1, \"form-select\"], [\"value\", \"Sell\"], [\"value\", \"Rent\"], [\"value\", \"Both\"], [\"formControlName\", \"size\", 1, \"form-select\"], [\"formControlName\", \"color\", 1, \"form-select\"], [\"formControlName\", \"category\", 1, \"form-select\"], [\"formControlName\", \"subcategory\", 1, \"form-select\"], [1, \"col-12\"], [\"formControlName\", \"description\", \"rows\", \"3\", 1, \"form-control\"], [1, \"mt-4\", \"text-end\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"spinner-border spinner-border-sm me-2\", 4, \"ngIf\"], [1, \"position-relative\", \"mb-2\"], [1, \"img-fluid\", \"rounded\", 2, \"max-height\", \"200px\", \"width\", \"100%\", \"object-fit\", \"contain\", 3, \"src\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-danger\", \"position-absolute\", \"top-0\", \"end-0\", 3, \"click\"], [1, \"form-control\", 3, \"type\", \"formControlName\"], [\"class\", \"text-danger small\", 4, \"ngIf\"], [1, \"text-danger\", \"small\"], [3, \"value\"], [1, \"spinner-border\", \"spinner-border-sm\", \"me-2\"]],\n      template: function AddProductComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 1)(1, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_1_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onSubmit());\n          });\n          i0.ɵɵelementStart(2, \"div\", 3)(3, \"div\", 4)(4, \"div\", 5)(5, \"h6\", 6);\n          i0.ɵɵtext(6, \"Product Image\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"input\", 7, 0);\n          i0.ɵɵlistener(\"change\", function AddProductComponent_Template_input_change_7_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.onAddImage($event));\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(9, AddProductComponent_div_9_Template, 4, 1, \"div\", 8);\n          i0.ɵɵelementStart(10, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function AddProductComponent_Template_button_click_10_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.addAnotherImage());\n          });\n          i0.ɵɵtext(11, \"Add Another Image\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(12, \"div\", 10)(13, \"div\", 11)(14, \"h6\", 6);\n          i0.ɵɵtext(15, \"General Information\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 12);\n          i0.ɵɵtemplate(17, AddProductComponent_div_17_Template, 5, 4, \"div\", 13);\n          i0.ɵɵelementStart(18, \"div\", 14)(19, \"label\", 15);\n          i0.ɵɵtext(20, \"Product Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"select\", 16)(22, \"option\", 17);\n          i0.ɵɵtext(23, \"Select Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(24, AddProductComponent_option_24_Template, 2, 2, \"option\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(25, \"div\", 14)(26, \"label\", 15);\n          i0.ɵɵtext(27, \"Available Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"select\", 19)(29, \"option\", 20);\n          i0.ɵɵtext(30, \"Sell\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(31, \"option\", 21);\n          i0.ɵɵtext(32, \"Rent\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"option\", 22);\n          i0.ɵɵtext(34, \"Both\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(35, \"div\", 14)(36, \"label\", 15);\n          i0.ɵɵtext(37, \"Size\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"select\", 23)(39, \"option\", 17);\n          i0.ɵɵtext(40, \"Select Size\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(41, AddProductComponent_option_41_Template, 2, 2, \"option\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(42, \"div\", 14)(43, \"label\", 15);\n          i0.ɵɵtext(44, \"Colour\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(45, \"select\", 24)(46, \"option\", 17);\n          i0.ɵɵtext(47, \"Select Colour\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(48, AddProductComponent_option_48_Template, 2, 2, \"option\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(49, \"div\", 14)(50, \"label\", 15);\n          i0.ɵɵtext(51, \"Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(52, \"select\", 25)(53, \"option\", 17);\n          i0.ɵɵtext(54, \"Select Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(55, AddProductComponent_option_55_Template, 2, 2, \"option\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(56, \"div\", 14)(57, \"label\", 15);\n          i0.ɵɵtext(58, \"Subcategory\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(59, \"select\", 26)(60, \"option\", 17);\n          i0.ɵɵtext(61, \"Select Subcategory\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(62, AddProductComponent_option_62_Template, 2, 2, \"option\", 18);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(63, \"div\", 27)(64, \"label\", 15);\n          i0.ɵɵtext(65, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(66, \"textarea\", 28);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(67, \"div\", 29)(68, \"button\", 30);\n          i0.ɵɵtemplate(69, AddProductComponent_span_69_Template, 1, 0, \"span\", 31);\n          i0.ɵɵtext(70, \" Add Product \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelement(71, \"router-outlet\");\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", ctx.images);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction4(14, _c5, i0.ɵɵpureFunction0(10, _c1), i0.ɵɵpureFunction0(11, _c2), i0.ɵɵpureFunction0(12, _c3), i0.ɵɵpureFunction0(13, _c4)));\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.productTypes);\n          i0.ɵɵadvance(17);\n          i0.ɵɵproperty(\"ngForOf\", ctx.sizes);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.colors);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngForOf\", ctx.subcategories);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\".add-product-page[_ngcontent-%COMP%]{background-color:#f8f9fa;min-height:100vh}.add-product-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #0000001a}.add-product-page[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500}.add-product-page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px;width:100%;object-fit:contain}.add-product-page[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{padding:.2rem .5rem;font-size:.8rem}.add-product-page[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{margin-top:1.5rem}.add-product-page[_ngcontent-%COMP%]   .bg-light[_ngcontent-%COMP%]{background-color:#f1f3f5!important}.add-product-page[_ngcontent-%COMP%]   .mb-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.spinner-border[_ngcontent-%COMP%]{vertical-align:text-bottom}\"]\n    }));\n  }\n  _staticBlock();\n  return AddProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}